<!doctype HTML>
<html>
    <head>
        <meta charset='utf-8'>
        <meta http-equiv='X-UA-Compatible' content='IE=edge'>
        <title>GeoAR.js demo</title>
        <script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@0edd9871b9d47ca60a305c5ea7369f8dbab34ead/dist/aframe-master.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/jeromeetienne/AR.js/2.2.2/aframe/build/aframe-ar.js"></script>
        <script>
            THREEx.ArToolkitContext.baseURL = 'https://raw.githack.com/jeromeetienne/AR.js/2.2.2/three.js/'
        </script>
    </head>

    <script>        
        function getLocation() {
          if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(setPosition);
          } else { 
            alert("Geolocation is not supported by this browser.");
          }
        }

        function setPosition(position){
            document.querySelector("#gpstext").setAttribute("gps-entity-place", "latitude: " + position.coords.latitude + "; longitude: " + position.coords.longitude+";");
            document.querySelector("#gpsbox").setAttribute("gps-entity-place", "latitude: " + position.coords.latitude + "; longitude: " + position.coords.longitude+";");
        }

    </script>

    <body style='margin : 0px; overflow: hidden;'>

        <!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
        <a-scene
        vr-mode-ui="enabled: false"
		embedded
		arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'>

        <a-text id="gpstext" value="This will always face the user." gps-entity-place="latitude: 37.5695556; longitude: -77.4357627;" look-at="[gps-camera]" scale="75 75 75"></a-text>

        <a-box id="gpsbox" color="yellow" gps-entity-place="latitude: 37.5695556; longitude: -77.4357627;" position="100 300 0"/>
        <a-camera gps-camera rotation-reader>
		</a-camera>
	</a-scene>

    </body>
    
</html>